# Quick Reference: Luas Area Bencana\n\n## ðŸš€ Quick Start\n\n### Jalankan Migrasi\n```bash\nphp artisan migrate\n```\n\n### Build Frontend\n```bash\nnpm run build\n```\n\n### Test Fitur\n1. Buat bencana baru dengan tipe polygon\n2. Lihat luas muncul di form\n3. Simpan dan lihat di tabel berlangsung\n\n## ðŸ“ File Penting\n\n### Frontend\n- `resources/js/pages/bencana/create.tsx` - Form dengan perhitungan luas\n- `resources/js/pages/bencana/berlangsung.tsx` - Tabel dengan kolom luas\n- `resources/js/pages/bencana/riwayat.tsx` - Tabel riwayat dengan luas\n\n### Backend\n- `app/Models/Bencana.php` - Model dengan auto-calculate luas\n- `database/migrations/2025_12_11_ensure_bencana_columns.php` - Migrasi baru\n\n## ðŸ” Helper Functions\n\n### Frontend (TypeScript)\n```typescript\n// Hitung luas polygon\nfunction calculatePolygonArea(coordinates: [number, number][]): string\n\n// Hitung luas radius\nfunction calculateRadiusArea(radiusData: any): string\n\n// Format luas untuk display\nfunction formatLuas(luas?: number): string\n```\n\n### Backend (PHP)\n```php\n// Hitung luas dari lokasi_data\nBencana::calculateArea(string $tipe_lokasi, array $lokasi_data): float\n\n// Format luas untuk display\n$bencana->formatted_luas  // Accessor\n```\n\n## ðŸ“Š Data Structure\n\n### Polygon\n```json\n{\n    \"tipe_lokasi\": \"polygon\",\n    \"lokasi_data\": [\n        [-7.536, 110.385],\n        [-7.537, 110.385],\n        [-7.537, 110.386]\n    ],\n    \"luas\": 12345.67\n}\n```\n\n### Radius\n```json\n{\n    \"tipe_lokasi\": \"radius\",\n    \"lokasi_data\": {\n        \"center\": {\"lat\": -7.536, \"lng\": 110.385},\n        \"radius\": 500\n    },\n    \"luas\": 785398.16\n}\n```\n\n### Titik\n```json\n{\n    \"tipe_lokasi\": \"titik\",\n    \"lokasi_data\": {\"lat\": -7.536, \"lng\": 110.385},\n    \"luas\": null\n}\n```\n\n## ðŸŽ¨ Format Luas\n\n| Nilai | Format |\n|-------|--------|\n| 0 - 9,999 mÂ² | `1.234 mÂ²` |\n| 10,000+ mÂ² | `1.23 ha` |\n| null | `-` |\n\n## ðŸ”§ Common Tasks\n\n### Tambah Kolom Baru ke Bencana\n```bash\n# Buat migrasi\nphp artisan make:migration add_column_to_bencana_table\n\n# Edit file migrasi\n# Jalankan\nphp artisan migrate\n```\n\n### Update Model Bencana\n```php\n// Tambah ke $fillable\nprotected $fillable = ['...', 'kolom_baru'];\n\n// Tambah ke $casts jika perlu\nprotected $casts = ['kolom_baru' => 'type'];\n```\n\n### Test Perhitungan Luas\n```php\n// Di tinker\n$bencana = Bencana::find(1);\necho $bencana->luas;  // Lihat nilai luas\necho $bencana->formatted_luas;  // Lihat format display\n```\n\n## ðŸ› Troubleshooting\n\n### Luas Tidak Muncul\n```bash\n# Cek migrasi\nphp artisan migrate:status\n\n# Cek kolom di database\nphp artisan tinker\n>>> Schema::hasColumn('bencana', 'luas')\n\n# Cek data\n>>> Bencana::first()->luas\n```\n\n### Luas Tidak Tersimpan\n```bash\n# Cek error log\ntail -f storage/logs/laravel.log\n\n# Cek model boot method\n# Pastikan calculateArea() dipanggil\n```\n\n### Frontend Error\n```bash\n# Cek console browser (F12)\n# Cek npm build\nnpm run build\n\n# Cek TypeScript errors\nnpm run type-check\n```\n\n## ðŸ“š Dokumentasi Lengkap\n\n- `RINGKASAN_PERUBAHAN_BENCANA_LUAS.md` - Detail perubahan\n- `DOKUMENTASI_LUAS_BENCANA.md` - Dokumentasi teknis\n- `CHECKLIST_IMPLEMENTASI_LUAS_BENCANA.md` - Testing & deployment\n- `SUMMARY_IMPLEMENTASI.md` - Overview\n\n## ðŸŽ¯ Key Points\n\nâœ… Luas dihitung otomatis di model boot method\nâœ… Frontend dan backend menggunakan formula yang sama\nâœ… Format luas konsisten di semua halaman\nâœ… Hanya polygon dan radius yang punya luas\nâœ… Titik tidak punya luas (null)\n\n## ðŸ“ž Quick Links\n\n- Model: `app/Models/Bencana.php`\n- Controller: `app/Http/Controllers/BencanaController.php`\n- Form: `resources/js/pages/bencana/create.tsx`\n- Tabel: `resources/js/pages/bencana/berlangsung.tsx`\n- Migrasi: `database/migrations/2025_12_11_ensure_bencana_columns.php`\n\n---\n\n**Tip:** Bookmark halaman ini untuk akses cepat!\n